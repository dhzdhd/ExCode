{% extends "base.html" %}

{% block title %}ExCode Pastebin{% endblock %}

{% block content %}
<header class="w-full h-16 top-0 px-[1rem] flex items-center justify-between">
  <h1 class="text-3xl">{{lang}}</h1>
  <div class="flex gap-2">
    <div class="tooltip tooltip-bottom tooltip-secondary" data-tip="Download">
      <button
        id="download"
        type="submit"
        aria-label="Download button"
        class="btn btn-secondary text-xl w-16"
      >
        <i class="fa-solid fa-download"></i>
      </button>
    </div>
    <div class="tooltip tooltip-bottom tooltip-secondary" data-tip="JSON">
      <button
        id="json"
        type="submit"
        aria-label="View JSON button"
        class="btn btn-secondary text-xl w-16"
      >
        <i class="fa-solid fa-code"></i>
      </button>
    </div>
    <div class="tooltip tooltip-bottom tooltip-secondary" data-tip="Copy URL">
      <button
        id="copy"
        type="submit"
        aria-label="Copy URL button"
        class="btn btn-secondary text-xl w-16"
      >
        <i class="fa-solid fa-copy"></i>
      </button>
    </div>
  </div>
</header>
<main class="h-screen text-md md:text-lg lg:text-xl">
  <pre><code>{{content}}</code></pre>
</main>

<script>
  document.getElementById("json").addEventListener("click", (event) => {
    location.assign(`${location.origin}/json${location.pathname}`);
  });

  document.getElementById("download").addEventListener("click", (event) => {
    let data = new Blob(String.raw`{{content}}`, { type: "text/plain" });
    let url = window.URL.createObjectURL(data);
    location.assign(url);
  });

  document.getElementById("copy").addEventListener("click", (event) => {
    navigator.clipboard.writeText(window.location.href);
  });
</script>
{% endblock %}
